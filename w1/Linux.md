
## Linux系统是宏内核
 Linux系统将大部分的功能全部集成在了内核程序中，属于是宏内核

### 内核 
1. 宏内核
	- 将操作系统的大部分功能全部集成到单一的内核程序中的设计方式
	- 内核包含了进程管理、内存管理、文件系统、设备驱动程序等多种核心功能
	- 优点是性能高，因为所有服务都在内核中运行，调用过程简单，效率高
	- 如果内核中的一个服务出现问题，可能会影响到整个系统的稳定性
2. 微内核
	- 内核尽可能精简到最小，只提供最核心的功能，如任务调度、中断处理等
	- 其他非核心功能会作为独立的服务进程运行在用户模式
	- 微内核的优点是结构简单，容易理解和修改，如果一个服务出现问题，也不会影响到其他服务
	- 因为服务之间的调用需要在内核和用户空间之间进行切换，效率较低
 
## 用户模式和内核模式

|特性|用户模式 (User Mode)|内核模式 (Kernel Mode)|
|---|---|---|
|权限等级|低权限（CPU Ring 3）|高权限（CPU Ring 0）|
|硬件访问|禁止直接访问硬件或内存|可直接操作硬件和所有内存|
|触发条件|应用程序代码执行|系统调用、中断、异常|
|崩溃影响|仅终止当前进程|可能导致整个系统崩溃|

## 用户进程间通讯的方式

1. 管道 (Pipe) 
	1. 数据只能在一个方向上流动，具有固定的读端和写端。
	2. 只能用于具有亲缘关系的进程之间的通信（父子进程或者兄弟进程之间）
	3. 可以被看成是一种特殊的文件，对于它的读写也可以使用普通的read、write 等函数。但是它不是普通的文件，并不属于其他任何文件系统，并且只存在于内存中
2. 命名管道 (FIFO)
	1. FIFO可以在无关的进程之间交换数据，与管道不同
	2. FIFO有路径名与之相关联，它以一种特殊设备文件形式存在于文件系统中
3. 信号 (Signal) 
	1. 内核向进程发送异步事件
4. 共享内存(Shared Memory)
	1. 多进程映射同一物理内存，最快但需同步机制（如信号量）
	2. 共享内存是最快的一种 IPC，因为进程是直接对内存进行存取。
    3. 因为多个进程可以同时操作，所以需要进行同步。
    4. 信号量+共享内存通常结合在一起使用，信号量用来同步对共享内存的访问。
5. 消息队列 
	1. 消息队列，是消息的链接表，存放在内核中。一个消息队列由一个标识符（即队列ID）来标识。
	2. 消息队列是面向记录的，其中的消息具有特定的格式以及特定的优先级。
    3. 消息队列独立于发送与接收进程。进程终止时，消息队列及其内容并不会被删除。
    4. 消息队列可以实现消息的随机查询,消息不一定要以先进先出的次序读取,也可以按消息的类型读取。
6. 信号量(semaphore)
	1. 是一个计数器。信号量用于实现进程间的互斥与同步，而不是用于存储进程间通信数据。
	2. 信号量用于进程间同步，若要在进程间传递数据需要结合共享内存。
    3. 信号量基于操作系统的 PV 操作，程序对信号量的操作都是原子操作。
    4. 每次对信号量的 PV 操作不仅限于对信号量值加 1 或减 1，而且可以加减任意正整数。
    5. 支持信号量组。
7. 套接字 (Socket)
	1. 双向通信管道，支持跨网络或本机的进程间数据交换，基于TCP/UDP或Unix域协议